/*
* jQuery timepicker addon
* By: Trent Richardson [http://trentrichardson.com]
* Version 0.9.6
* Last Modified: 07/20/2011
* 
* Copyright 2011 Trent Richardson
* Dual licensed under the MIT and GPL licenses.
* http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
* http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
* 
* HERES THE CSS:
* .ui-timepicker-div .ui-widget-header{ margin-bottom: 8px; }
* .ui-timepicker-div dl{ text-align: left; }
* .ui-timepicker-div dl dt{ height: 25px; }
* .ui-timepicker-div dl dd{ margin: -25px 10px 10px 65px; }
* .ui-timepicker-div td { font-size: 90%; }
*/

(function($){$.extend($.ui,{timepicker:{version:"0.9.6"}});function Timepicker(){this.regional=[];this.regional['']={currentText:'Now',closeText:'Done',ampm:false,timeFormat:'hh:mm tt',timeSuffix:'',timeOnlyTitle:'Choose Time',timeText:'Time',hourText:'Hour',minuteText:'Minute',secondText:'Second',timezoneText:'Time Zone'};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showTimezone:false,showTime:true,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:'+0000',hourMin:0,minuteMin:0,secondMin:0,hourMax:23,minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:true,separator:' ',altFieldTimeOnly:true,showTimepicker:true,timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"]};$.extend(this._defaults,this.regional[''])}$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:'+0000',hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:'',formattedDate:'',formattedTime:'',formattedDateTime:'',timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"],setDefaults:function(a){extendRemove(this._defaults,a||{});return this},_newInst:function(d,o){var e=new Timepicker(),inlineSettings={};for(var f in this._defaults){var g=d.attr('time:'+f);if(g){try{inlineSettings[f]=eval(g)}catch(err){inlineSettings[f]=g}}}e._defaults=$.extend({},this._defaults,inlineSettings,o,{beforeShow:function(a,b){if($.isFunction(o.beforeShow))o.beforeShow(a,b,e)},onChangeMonthYear:function(a,b,c){e._updateDateTime(c);if($.isFunction(o.onChangeMonthYear))o.onChangeMonthYear.call(d[0],a,b,c,e)},onClose:function(a,b){if(e.timeDefined===true&&d.val()!='')e._updateDateTime(b);if($.isFunction(o.onClose))o.onClose.call(d[0],a,b,e)},timepicker:e});e.hour=e._defaults.hour;e.minute=e._defaults.minute;e.second=e._defaults.second;e.ampm='';e.$input=d;if(o.altField)e.$altInput=$(o.altField).css({cursor:'pointer'}).focus(function(){d.trigger("focus")});if(e._defaults.minDate!==undefined&&e._defaults.minDate instanceof Date)e._defaults.minDateTime=new Date(e._defaults.minDate.getTime());if(e._defaults.minDateTime!==undefined&&e._defaults.minDateTime instanceof Date)e._defaults.minDate=new Date(e._defaults.minDateTime.getTime());if(e._defaults.maxDate!==undefined&&e._defaults.maxDate instanceof Date)e._defaults.maxDateTime=new Date(e._defaults.maxDate.getTime());if(e._defaults.maxDateTime!==undefined&&e._defaults.maxDateTime instanceof Date)e._defaults.maxDate=new Date(e._defaults.maxDateTime.getTime());return e},_addTimePicker:function(a){var b=(this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+' '+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(b);this._limitMinMaxDateTime(a,false);this._injectTimePicker()},_parseTime:function(a,b){var c=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,'(\\d?\\d)').replace(/m{1,2}/ig,'(\\d?\\d)').replace(/s{1,2}/ig,'(\\d?\\d)').replace(/t{1,2}/ig,'(am|pm|a|p)?').replace(/z{1}/ig,'((\\+|-)\\d\\d\\d\\d)?').replace(/\s/g,'\\s?')+this._defaults.timeSuffix+'$',order=this._getFormatPositions(),treg;if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);if(b||!this._defaults.timeOnly){var d=$.datepicker._get(this.inst,'dateFormat');var e=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");c='.{'+d.length+',}'+this._defaults.separator.replace(e,"\\$&")+c}treg=a.match(new RegExp(c,'i'));if(treg){if(order.t!==-1)this.ampm=((treg[order.t]===undefined||treg[order.t].length===0)?'':(treg[order.t].charAt(0).toUpperCase()=='A')?'AM':'PM').toUpperCase();if(order.h!==-1){if(this.ampm=='AM'&&treg[order.h]=='12')this.hour=0;else if(this.ampm=='PM'&&treg[order.h]!='12')this.hour=(parseFloat(treg[order.h])+12).toFixed(0);else this.hour=Number(treg[order.h])}if(order.m!==-1)this.minute=Number(treg[order.m]);if(order.s!==-1)this.second=Number(treg[order.s]);if(order.z!==-1)this.timezone=treg[order.z];return true}return false},_getFormatPositions:function(){var a=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),orders={h:-1,m:-1,s:-1,t:-1,z:-1};if(a)for(var i=0;i<a.length;i++)if(orders[a[i].toString().charAt(0)]==-1)orders[a[i].toString().charAt(0)]=i+1;return orders},_injectTimePicker:function(){var c=this.inst.dpDiv,o=this._defaults,tp_inst=this,hourMax=(o.hourMax-(o.hourMax%o.stepHour)).toFixed(0),minMax=(o.minuteMax-(o.minuteMax%o.stepMinute)).toFixed(0),secMax=(o.secondMax-(o.secondMax%o.stepSecond)).toFixed(0),dp_id=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,'');if(c.find("div#ui-timepicker-div-"+dp_id).length===0&&o.showTimepicker){var d=' style="display:none;"',html='<div class="ui-timepicker-div" id="ui-timepicker-div-'+dp_id+'"><dl>'+'<dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+dp_id+'"'+((o.showTime)?'':d)+'>'+o.timeText+'</dt>'+'<dd class="ui_tpicker_time" id="ui_tpicker_time_'+dp_id+'"'+((o.showTime)?'':d)+'></dd>'+'<dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+dp_id+'"'+((o.showHour)?'':d)+'>'+o.hourText+'</dt>',hourGridSize=0,minuteGridSize=0,secondGridSize=0,size;if(o.showHour&&o.hourGrid>0){html+='<dd class="ui_tpicker_hour">'+'<div id="ui_tpicker_hour_'+dp_id+'"'+((o.showHour)?'':d)+'></div>'+'<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var h=o.hourMin;h<=hourMax;h+=o.hourGrid){hourGridSize++;var e=(o.ampm&&h>12)?h-12:h;if(e<10)e='0'+e;if(o.ampm){if(h==0)e=12+'a';else if(h<12)e+='a';else e+='p'}html+='<td>'+e+'</td>'}html+='</tr></table></div>'+'</dd>'}else html+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+dp_id+'"'+((o.showHour)?'':d)+'></dd>';html+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+dp_id+'"'+((o.showMinute)?'':d)+'>'+o.minuteText+'</dt>';if(o.showMinute&&o.minuteGrid>0){html+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+o.minuteGrid+'">'+'<div id="ui_tpicker_minute_'+dp_id+'"'+((o.showMinute)?'':d)+'></div>'+'<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var m=o.minuteMin;m<=minMax;m+=o.minuteGrid){minuteGridSize++;html+='<td>'+((m<10)?'0':'')+m+'</td>'}html+='</tr></table></div>'+'</dd>'}else html+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+dp_id+'"'+((o.showMinute)?'':d)+'></dd>';html+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+dp_id+'"'+((o.showSecond)?'':d)+'>'+o.secondText+'</dt>';if(o.showSecond&&o.secondGrid>0){html+='<dd class="ui_tpicker_second ui_tpicker_second_'+o.secondGrid+'">'+'<div id="ui_tpicker_second_'+dp_id+'"'+((o.showSecond)?'':d)+'></div>'+'<div style="padding-left: 1px"><table><tr>';for(var s=o.secondMin;s<=secMax;s+=o.secondGrid){secondGridSize++;html+='<td>'+((s<10)?'0':'')+s+'</td>'}html+='</tr></table></div>'+'</dd>'}else html+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+dp_id+'"'+((o.showSecond)?'':d)+'></dd>';html+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+dp_id+'"'+((o.showTimezone)?'':d)+'>'+o.timezoneText+'</dt>';html+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+dp_id+'"'+((o.showTimezone)?'':d)+'></dd>';html+='</dl></div>';$tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all">'+'<div class="ui-datepicker-title">'+o.timeOnlyTitle+'</div>'+'</div>');c.find('.ui-datepicker-header, .ui-datepicker-calendar').hide()}this.hour_slider=$tp.find('#ui_tpicker_hour_'+dp_id).slider({orientation:"horizontal",value:this.hour,min:o.hourMin,max:hourMax,step:o.stepHour,slide:function(a,b){tp_inst.hour_slider.slider("option","value",b.value);tp_inst._onTimeChange()}});this.minute_slider=$tp.find('#ui_tpicker_minute_'+dp_id).slider({orientation:"horizontal",value:this.minute,min:o.minuteMin,max:minMax,step:o.stepMinute,slide:function(a,b){tp_inst.minute_slider.slider("option","value",b.value);tp_inst._onTimeChange()}});this.second_slider=$tp.find('#ui_tpicker_second_'+dp_id).slider({orientation:"horizontal",value:this.second,min:o.secondMin,max:secMax,step:o.stepSecond,slide:function(a,b){tp_inst.second_slider.slider("option","value",b.value);tp_inst._onTimeChange()}});this.timezone_select=$tp.find('#ui_tpicker_timezone_'+dp_id).append('<select></select>').find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(a,b){return $("<option />").val(typeof a=="object"?a.value:a).text(typeof a=="object"?a.label:a)}));this.timezone_select.val((typeof this.timezone!="undefined"&&this.timezone!=null&&this.timezone!="")?this.timezone:o.timezone);this.timezone_select.change(function(){tp_inst._onTimeChange()});if(o.showHour&&o.hourGrid>0){size=100*hourGridSize*o.hourGrid/(hourMax-o.hourMin);$tp.find(".ui_tpicker_hour table").css({width:size+"%",marginLeft:(size/(-2*hourGridSize))+"%",borderCollapse:'collapse'}).find("td").each(function(b){$(this).click(function(){var h=$(this).html();if(o.ampm){var a=h.substring(2).toLowerCase(),aph=parseInt(h.substring(0,2),10);if(a=='a'){if(aph==12)h=0;else h=aph}else if(aph==12)h=12;else h=aph+12}tp_inst.hour_slider.slider("option","value",h);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/hourGridSize)+'%',textAlign:'center',overflow:'hidden'})})}if(o.showMinute&&o.minuteGrid>0){size=100*minuteGridSize*o.minuteGrid/(minMax-o.minuteMin);$tp.find(".ui_tpicker_minute table").css({width:size+"%",marginLeft:(size/(-2*minuteGridSize))+"%",borderCollapse:'collapse'}).find("td").each(function(a){$(this).click(function(){tp_inst.minute_slider.slider("option","value",$(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/minuteGridSize)+'%',textAlign:'center',overflow:'hidden'})})}if(o.showSecond&&o.secondGrid>0){$tp.find(".ui_tpicker_second table").css({width:size+"%",marginLeft:(size/(-2*secondGridSize))+"%",borderCollapse:'collapse'}).find("td").each(function(a){$(this).click(function(){tp_inst.second_slider.slider("option","value",$(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:'pointer',width:(100/secondGridSize)+'%',textAlign:'center',overflow:'hidden'})})}var f=c.find('.ui-datepicker-buttonpane');if(f.length)f.before($tp);else c.append($tp);this.$timeObj=$tp.find('#ui_tpicker_time_'+dp_id);if(this.inst!==null){var g=this.timeDefined;this._onTimeChange();this.timeDefined=g}var i=function(){tp_inst._onSelectHandler()};this.hour_slider.bind('slidestop',i);this.minute_slider.bind('slidestop',i);this.second_slider.bind('slidestop',i)}},_limitMinMaxDateTime:function(a,b){var o=this._defaults,dp_date=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(!this._defaults.showTimepicker)return;if($.datepicker._get(a,'minDateTime')!==null&&dp_date){var c=$.datepicker._get(a,'minDateTime'),minDateTimeDate=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin}if(a.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMin=c.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=c.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=c.getSeconds()}else{if(this.second<this._defaults.secondMin)this.second=this._defaults.secondMin;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal}}if($.datepicker._get(a,'maxDateTime')!==null&&dp_date){var d=$.datepicker._get(a,'maxDateTime'),maxDateTimeDate=new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax}if(a.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMax=d.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=d.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=d.getSeconds()}else{if(this.second>this._defaults.secondMax)this.second=this._defaults.secondMax;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal}}if(b!==undefined&&b===true){var e=(this._defaults.hourMax-(this._defaults.hourMax%this._defaults.stepHour)).toFixed(0),minMax=(this._defaults.minuteMax-(this._defaults.minuteMax%this._defaults.stepMinute)).toFixed(0),secMax=(this._defaults.secondMax-(this._defaults.secondMax%this._defaults.stepSecond)).toFixed(0);if(this.hour_slider)this.hour_slider.slider("option",{min:this._defaults.hourMin,max:e}).slider('value',this.hour);if(this.minute_slider)this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:minMax}).slider('value',this.minute);if(this.second_slider)this.second_slider.slider("option",{min:this._defaults.secondMin,max:secMax}).slider('value',this.second)}},_onTimeChange:function(){var a=(this.hour_slider)?this.hour_slider.slider('value'):false,minute=(this.minute_slider)?this.minute_slider.slider('value'):false,second=(this.second_slider)?this.second_slider.slider('value'):false,timezone=(this.timezone_select)?this.timezone_select.val():false;if(typeof(a)=='object')a=false;if(typeof(minute)=='object')minute=false;if(typeof(second)=='object')second=false;if(typeof(timezone)=='object')timezone=false;if(a!==false)a=parseInt(a,10);if(minute!==false)minute=parseInt(minute,10);if(second!==false)second=parseInt(second,10);var b=(a<12)?'AM':'PM';var c=(a!=this.hour||minute!=this.minute||second!=this.second||(this.ampm.length>0&&this.ampm!=b)||timezone!=this.timezone);if(c){if(a!==false)this.hour=a;if(minute!==false)this.minute=minute;if(second!==false)this.second=second;if(timezone!==false)this.timezone=timezone;if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);this._limitMinMaxDateTime(this.inst,true)}if(this._defaults.ampm)this.ampm=b;this._formatTime();if(this.$timeObj)this.$timeObj.text(this.formattedTime+this._defaults.timeSuffix);this.timeDefined=true;if(c)this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults['onSelect'];var b=this.$input?this.$input[0]:null;if(a&&b){a.apply(b,[this.formattedDateTime,this])}},_formatTime:function(a,b,c){if(c==undefined)c=this._defaults.ampm;a=a||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var d=b||this._defaults.timeFormat.toString();if(c){var e=((a.ampm=='AM')?(a.hour):(a.hour%12));e=(Number(e)===0)?12:e;d=d.toString().replace(/hh/g,((e<10)?'0':'')+e).replace(/h/g,e).replace(/mm/g,((a.minute<10)?'0':'')+a.minute).replace(/m/g,a.minute).replace(/ss/g,((a.second<10)?'0':'')+a.second).replace(/s/g,a.second).replace(/TT/g,a.ampm.toUpperCase()).replace(/Tt/g,a.ampm.toUpperCase()).replace(/tT/g,a.ampm.toLowerCase()).replace(/tt/g,a.ampm.toLowerCase()).replace(/T/g,a.ampm.charAt(0).toUpperCase()).replace(/t/g,a.ampm.charAt(0).toLowerCase()).replace(/z/g,a.timezone)}else{d=d.toString().replace(/hh/g,((a.hour<10)?'0':'')+a.hour).replace(/h/g,a.hour).replace(/mm/g,((a.minute<10)?'0':'')+a.minute).replace(/m/g,a.minute).replace(/ss/g,((a.second<10)?'0':'')+a.second).replace(/s/g,a.second).replace(/z/g,a.timezone);d=$.trim(d.replace(/t/gi,''))}if(arguments.length)return d;else this.formattedTime=d},_updateDateTime:function(a){a=this.inst||a,dt=new Date(a.selectedYear,a.selectedMonth,a.selectedDay),dateFmt=$.datepicker._get(a,'dateFormat'),formatCfg=$.datepicker._getFormatConfig(a),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var b=this.formattedDate;if(a.lastVal!==undefined&&(a.lastVal.length>0&&this.$input.val().length===0))return;if(this._defaults.timeOnly===true){b=this.formattedTime}else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable)){b+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}this.formattedDateTime=b;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else if(this.$altInput&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$altInput.val(b);this.$input.val(b)}else{this.$input.val(b)}this.$input.trigger("change")}});$.fn.extend({timepicker:function(o){o=o||{};var a=arguments;if(typeof o=='object')a[0]=$.extend(o,{timeOnly:true});return $(this).each(function(){$.fn.datetimepicker.apply($(this),a)})},datetimepicker:function(o){o=o||{};var b=this,tmp_args=arguments;if(typeof(o)=='string'){if(o=='getDate')return $.fn.datepicker.apply($(this[0]),tmp_args);else return this.each(function(){var a=$(this);a.datepicker.apply(a,tmp_args)})}else return this.each(function(){var a=$(this);a.datepicker($.timepicker._newInst(a,o)._defaults)})}});$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(a,b){var c=this._getInst($(a)[0]),tp_inst=this._get(c,'timepicker');if(tp_inst){tp_inst._limitMinMaxDateTime(c,true);c.inline=c.stay_open=true;this._base_selectDate(a,b+tp_inst._defaults.separator+tp_inst.formattedTime+tp_inst._defaults.timeSuffix);c.inline=c.stay_open=false;this._notifyChange(c);this._updateDatepicker(c)}else this._base_selectDate(a,b)};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(a){var b=a.input[0];if($.datepicker._curInst&&$.datepicker._curInst!=a&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=b){return}if(typeof(a.stay_open)!=='boolean'||a.stay_open===false){this._base_updateDatepicker(a);var c=this._get(a,'timepicker');if(c)c._addTimePicker(a)}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(a){var b=$.datepicker._getInst(a.target),tp_inst=$.datepicker._get(b,'timepicker');if(tp_inst){if($.datepicker._get(b,'constrainInput')){var c=tp_inst._defaults.ampm,dateChars=$.datepicker._possibleChars($.datepicker._get(b,'dateFormat')),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,'').replace(/TT/g,c?'APM':'').replace(/Tt/g,c?'AaPpMm':'').replace(/tT/g,c?'AaPpMm':'').replace(/T/g,c?'AP':'').replace(/tt/g,c?'apm':'').replace(/t/g,c?'ap':'')+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tp_inst._defaults.showTimezone?tp_inst._defaults.timezoneList.join(''):'')+dateChars,chr=String.fromCharCode(a.charCode===undefined?a.keyCode:a.charCode);return a.ctrlKey||(chr<' '||!dateChars||datetimeChars.indexOf(chr)>-1)}}return $.datepicker._base_doKeyPress(a)};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(a){var b=$.datepicker._getInst(a.target),tp_inst=$.datepicker._get(b,'timepicker');if(tp_inst){if(tp_inst._defaults.timeOnly&&(b.input.val()!=b.lastVal)){try{$.datepicker._updateDatepicker(b)}catch(err){$.datepicker.log(err)}}}return $.datepicker._base_doKeyUp(a)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(a){this._base_gotoToday(a);this._setTime(this._getInst($(a)[0]),new Date())};$.datepicker._disableTimepickerDatepicker=function(a,b,c){var d=this._getInst(a),tp_inst=this._get(d,'timepicker');$(a).datepicker('getDate');if(tp_inst){tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(d)}};$.datepicker._enableTimepickerDatepicker=function(a,b,c){var d=this._getInst(a),tp_inst=this._get(d,'timepicker');$(a).datepicker('getDate');if(tp_inst){tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(d);tp_inst._updateDateTime(d)}};$.datepicker._setTime=function(a,b){var c=this._get(a,'timepicker');if(c){var d=c._defaults,hour=b?b.getHours():d.hour,minute=b?b.getMinutes():d.minute,second=b?b.getSeconds():d.second;if((hour<d.hourMin||hour>d.hourMax)||(minute<d.minuteMin||minute>d.minuteMax)||(second<d.secondMin||second>d.secondMax)){hour=d.hourMin;minute=d.minuteMin;second=d.secondMin}c.hour=hour;c.minute=minute;c.second=second;if(c.hour_slider)c.hour_slider.slider('value',hour);if(c.minute_slider)c.minute_slider.slider('value',minute);if(c.second_slider)c.second_slider.slider('value',second);c._onTimeChange();c._updateDateTime(a)}};$.datepicker._setTimeDatepicker=function(a,b,c){var d=this._getInst(a),tp_inst=this._get(d,'timepicker');if(tp_inst){this._setDateFromField(d);var e;if(b){if(typeof b=="string"){tp_inst._parseTime(b,c);e=new Date();e.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second)}else e=new Date(b.getTime());if(e.toString()=='Invalid Date')e=undefined;this._setTime(d,e)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(a,b){var c=this._getInst(a),tp_date=(b instanceof Date)?new Date(b.getTime()):b;this._updateDatepicker(c);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(a,b){var c=this._getInst(a),tp_inst=this._get(c,'timepicker');if(tp_inst){this._setDateFromField(c,b);var d=this._getDate(c);if(d&&tp_inst._parseTime($(a).val(),tp_inst.timeOnly))d.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second);return d}return this._base_getDateDatepicker(a,b)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(a,b,c){var d;try{d=this._base_parseDate(a,b,c)}catch(err){d=this._base_parseDate(a,b.substring(0,b.length-(err.length-err.indexOf(':')-2)),c)}return d};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(a,b,c){this._base_optionDatepicker(a,b,c);var d=this._getInst(a),tp_inst=this._get(d,'timepicker');if(tp_inst){if(b==='minDate'){if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date)tp_inst._defaults.minDateTime=new Date(c);if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date)tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());tp_inst._limitMinMaxDateTime(d,true)}if(b==='maxDate'){if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date)tp_inst._defaults.maxDateTime=new Date(c);if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date)tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());tp_inst._limitMinMaxDateTime(d,true)}}};function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]===null||b[c]===undefined)a[c]=b[c];return a}$.timepicker=new Timepicker();$.timepicker.version="0.9.6"})(jQuery);